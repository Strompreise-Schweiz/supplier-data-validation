{
  "$id": "https://raw.githubusercontent.com/Strompreise-Schweiz/supplier-data-validation/main/suppliers/power-utility/v1/supplier.schema.json",
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "Strompreise Schweiz Supplier",
  "type": "object",
  "required": ["name", "location", "website", "email"],
  "additionalProperties": false,
  "properties": {
    "$schema": { "type": "string", "format": "uri" },
    "name": { "type": "string", "minLength": 3 },
    "website": { "type": "string", "format": "uri" },
    "email": { "type": "string", "format": "email" },

    "uid": {
      "type": "string",
      "description": "Enterprises-UID in format CHE-XXX.XXX.XXX",
      "pattern": "^CHE-[0-9]{3}\\.[0-9]{3}\\.[0-9]{3}$"
    },

    "vse_id": {
      "type": "string",
      "description": "VSE-ID starts with CH, followed by 11 digits",
      "pattern": "^CH[0-9]{11}$"
    },

    "location": {
      "type": "object",
      "required": ["address", "coordinates"],
      "additionalProperties": false,
      "properties": {
        "address": {
          "type": "object",
          "required": ["street", "postal_code", "city", "canton", "country"],
          "additionalProperties": false,
          "properties": {
            "street": { "type": "string" },
            "postal_code": { "type": "string", "pattern": "^[0-9]{4}$" },
            "city": { "type": "string" },
            "canton": {
              "type": "string",
              "enum": [
                "ZH","BE","LU","UR","SZ","OW","NW","GL","ZG","FR","SO",
                "BS","BL","SH","AR","AI","SG","GR","AG","TG","TI","VD",
                "VS","NE","GE","JU"
              ]
            },
            "country": {
              "type": "string",
              "enum": ["CH"]
            }
          }
        },
        "coordinates": {
          "type": "object",
          "required": ["latitude", "longitude"],
          "additionalProperties": false,
          "properties": {
            "latitude":  { "type": "number", "minimum": -90,  "maximum": 90 },
            "longitude": { "type": "number", "minimum": -180, "maximum": 180 }
          }
        },
        "map": {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "type": { "type": "string", "enum": ["google", "osm"] },
            "url":  { "type": "string", "format": "uri" }
          }
        }
      }
    }
  }
}
